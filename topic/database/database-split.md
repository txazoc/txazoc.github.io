---
layout: topic
module: 数据库
title:  数据库拆分
date:   2017-01-28
---

当单库表太多或单表数据量太大时，需要对数据库进行拆分。

#### 垂直切分

单库表太多时，可以按业务进行分库，例如用户库、关注库和订单库

#### 水平切分

单表数据量太大时，可以进行分库分表

* 范围切分
    * 1 - 10000001
    * 10000001 - 21000000
    * 20000001 - 31000000
    * ...
* hash切分
    * 一致性hash: id % n

#### 水平切分唯一ID

* 数据库集群 + 步长
* Zookeeper
* GUID
* 时间戳 + 业务ID

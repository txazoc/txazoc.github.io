---
layout: dict
title:  缓存问题
date:   2020-09-19
tags:   [缓存]
---

#### 缓存穿透

查询的数据在缓存和数据库中都不存在，导致每次请求都会查询数据库，缓存也就失去了意义

##### 缓存中存储空对象

##### 布隆过滤器

#### 缓存失效后并发

高并发情况下，某个缓存失效，会导致多个进程同时查询数据库，对数据库造成压力

##### 永久缓存

##### 定时更新

创建定时任务，从数据库查询数据来更新缓存

##### 分布式锁

引入分布式锁，获得锁的进程查询数据库，其它进程等待解锁后先查询缓存

##### 缓存失效前更新

过期时间写入value，get时判断是否即将过期，是则开启任务从数据库查询数据来更新缓存(保证一个key只有一个任务)

#### 大量缓存失效

某一段时间内，大量缓存集体失效，导致查询数据库，对数据库造成压力

##### 失效时间离散化

使缓存失效时间分布均匀，可以在固定的失效时间上加上一个随机时间

#### 缓存血崩

缓存宕机、缓存失效后并发、大量缓存失效、宕机重启时大量数据未加载到缓存，导致大量请求查询数据库，使数据库负载过高甚至宕机

##### Redis主备

##### 分布式锁

##### DB限流

##### 缓存预热

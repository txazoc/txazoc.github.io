---
layout: map
title:  多核编程
---

#### 串行/并发/并行

* 串行: 一个调用栈和一个运行时上下文，顺序执行
    * 单核单线程
* 并发: 多个调用栈和多个运行时上下文，逻辑上同时执行，物理上共享CPU时间分片
    * 单核多线程
* 并行: 多个调用栈和多个运行时上下文，物理上同时执行
    * 多核多线程

#### 多核体系架构

* 单核CPU
    * 流水线技术
    * 超流水线技术
    * CPU和I/O并行
* 多核CPU
* 多CPU

单核向多核发展?

* 处理器性能 = 主频 * IPC(单个时钟周期内可以执行的指令数)
* 处理器功耗 正比 电流 * 电压^(2*主频)，主频正比电压
* 提高IPC: 可通过提高指令并行度实现
    * 流水线技术
    * 多核架构

#### 内存模型

* 原子性
    * 硬件提供的原子操作: 基本读写
    * LOCK
        * 总线锁
        * 缓存行锁
    * 锁
        * synchronized
* 可见性: 缓存一致性
    * 缓存一致性协议
    * 缓存行填充
* 有序性: 顺序一致性
    * 重排序
    * 内存屏障

#### 并发模型

* 无等待并发: 无轮询、无等待
* 无锁并发: CAS + 轮询
* 阻塞并发: 锁

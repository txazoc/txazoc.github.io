---
layout: map
title:  分布式
---

#### 分布式带来的问题

* 分布式架构
    * 主从
    * 读写分离
* 节点间的数据同步

#### CAP

在`分布式系统`中，最多同时满足以下三条中的两条，不可能三者兼得

* C(Consistency): 一致性
    * 所有节点上的数据是一致的
* A(Availability): 可用性
    * 可对外提供服务
* P(Partition Tolerance): 分区容忍性
    * 分区: 整个网络分为几块区域，相互之间不连通
        * 节点宕机
        * 网络异常

<img src="/images/distribution/cap.jpg" style="width: 320px" title="CAP" />

* `单节点`: 可以同时满足一致性和可用性(`CA`)，但无法避免单点故障
* `多节点`: 数据在多个节点之间同步，每个节点都可对外提供服务
    * `未发生分区`
        * 保证一致性(`CP`): 数据同步复制到所有节点，降低了可用性
        * 保证可用性(`AP`): 数据异步复制到所有节点，可能导致数据不一致
* `发生分区`: 节点之间无法正常同步数据，这时，就必须做一个艰难的选择
    * 保证一致性牺牲可用性(`CP`): 为保证所有节点上的数据是一致的，节点必须暂停对外提供写服务
    * 保证可用性牺牲一致性(`AP`): 为保证节点继续对外提供服务，忽略数据同步上的失败，但会导致节点之间的数据不一致

分布式系统无法放弃分区容忍性，只能在可用性和一致性之间取舍，一般通过牺牲`强一致性`来换取系统的`高可用性`，保证`最终一致性`即可

#### ACID

* A(Atomicity): 原子性
* C(Consistency): 一致性
* I(Isolation): 隔离性
* D(Durability): 持久性

关系数据库同时满足强一致性和可用性，不满足分区容忍性

#### BASE

* BA
* S
* E

#### 分布式数据库

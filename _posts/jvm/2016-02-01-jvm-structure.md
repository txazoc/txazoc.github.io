---
layout:     article
categories: [jvm]
title:      Java虚拟机结构
tags:       [jvm]
date:       2016-02-01 00:00:00
---

## Java虚拟机结构

### 类文件格式

Java代码编译为二进制的格式（`类文件格式`）才可以被Java虚拟机执行。

### 数据类型

Java虚拟机的数据类型：

* 基本类型
* 引用类型

Java虚拟机数据类型支持：

* 变量存储
* 参数传递
* 方法返回
* 操作值

### 基本类型和值

Java虚拟机支持的基本数据类型有三种：

* 数值类型
* 布尔类型
* 返回类型

##### 数值类型

数值类型包括整形和浮点型。

```java
类型		字节数		符号		默认值	值范围
byte		1		有		0		-128 ~ 127
short		2		有		0		-32768 ~ 32767
int			4		有		0		-2147483648 ~ 2147483647
long		8		有		0		-9223372036854775808 ~ 9223372036854775807
char		2		无		\u0000	0 ~ 65535
float		4		有		0.0
double		8		有		0.0
```

##### 布尔类型

布尔类型有`true`和`false`两种值，默认值为`false`。Java虚拟机没有提供针对`boolean`操作的指令，实际上，Java中的`boolean`被编译为Java虚拟机的`int`数据类型。

Java虚拟机直接支持`boolean`数组，使用`newarray`指令来创建`boolean`数组，`boolean`数组的访问和修改通过`byte`数组的指令`baload`、`bastore`来实现。

在Oracle的Java虚拟机实现中，Java中的`boolean`数组被编译为Java虚拟机中的`byte`数组，每个`boolean`元素占用8个字节。

##### 返回类型

返回类型是通过Java虚拟机中的`jsr`、`ret`、`jsr_w`指令实现的。返回类型的值指向Java虚拟机指令的操作码。和数值的基本类型不同，返回类型不匹配Java编程语言类型，并且运行时不可被修改。

### 引用类型和值

Java虚拟机有三种引用类型：

* 类类型
* 接口类型
* 数组类型

### 运行时数据区

### 栈桢

### 特殊方法

### 异常

### 类库
